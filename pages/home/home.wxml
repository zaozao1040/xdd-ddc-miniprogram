<view>
    <view class="home-container" bindtap="closeNotice" wx:if='{{preLoad1||showHomePage}}'>

        <!-- 轮播图 autoplay="true"3.0-->
        <swiper autoplay class="h-v2-swiper-item" circular="true" duration="300" indicatorActiveColor="#fff" indicatorColor="rgba(255,255,255,0.50)" indicatorDots interval="5000" bindchange="onSwiperChange">
            <block wx:for="{{imagesList.bannerImage}}" wx:for-index="swiperListIndex" wx:for-item="swiperListItem" wx:key="swiperListIndex">
                <swiper-item bindtap="navigateTo">
                    <navigator url="/pages/home/link?extendUrl={{swiperListItem.url}}" style="width: 100%;height: 100%;border-radius: 8rpx;">
                        <image src="{{swiperListItem.image}}" style="width: 100%;height: 100%;border-radius: 8rpx;"></image>
                    </navigator>
                </swiper-item>
            </block>
        </swiper>

        <!-- 轮播公告 3.0-->
        <view style="padding:0 30rpx 40rpx 36rpx;" wx:if="{{hasNotice}}">
            <view class='notice-item'>
                <view class="notice-title">最新公告</view>
                <view class='notice-button' catchtap="handleshowAllNotice">查看更多</view>
            </view>
            <swiper class="notice-detail" circular="true" duration="500" vertical="true" autoplay="true">
                <block wx:for="{{noticeData}}" wx:key="{{index}}">
                    <swiper-item catchtap="handleshowOneNotice" data-onenotice="{{item}}" style='margin-left:-10rpx;'>
                        【点我查看】{{item.noticeTitle}}
                    </swiper-item>
                </block>
            </swiper>
        </view>

        <!--弹出公告-->
        <view class="modulebox-background-wrapper" wx:if="{{showOneNotice&&!showUserAuthFlag&&!showCheckFlag}}">
            <view>
                <image src='/images/home/announcement_pic.png' class='modulebox-image'></image>
            </view>
            <swiper class="modulebox-wrapper-notice" circular="true" duration="500" autoplay="true" indicator-dots indicator-color='rgba(247,156,76,0.30)' indicator-active-color='#F79C4C'>
                <block wx:for="{{showedNoticeData}}" wx:key="{{index}}">
                    <swiper-item>

                        <block>
                            <view class='modulebox-notice-title'>
                                {{item.noticeTitle}}
                            </view>
                            <scroll-view scroll-y style='height:270rpx;'>
                                <view class="modulebox-notice-content">
                                    {{item.content}}
                                </view>
                            </scroll-view>
                        </block>
                    </swiper-item>
                </block>
            </swiper>
        </view>

        <!-- 开始点餐 3.0-->
        <view class="h-v3">
            <view class="h-v3-1" catchtap="handleGotoMenu">
                <text class='iconfont icon-canting'></text> 开始点餐
            </view>
            <view style="position:absolute;top:{{hasNotice?460:328}}rpx;height:100rpx;width:600rpx;margin-left:46rpx;z-index:-1;">
                <image src="/images/home/home_projection.png" style="height:100rpx;width:600rpx;"></image>
            </view>
        </view>
        <!-- 3个图标 3.0 -->
        <view class="label-wrapper">
            <view style="width:112rpx;text-align: center; " bindtap="handleGotoLabel" data-type="qianbao">
                <view style="margin-left:12rpx;height: 88rpx;width:88rpx;">
                    <image src='/images/home/home_balance.png' style="height: 88rpx;width:88rpx;"></image>
                </view>
                <view class="label-des">我的钱包</view>
            </view>
            <view style="width:88rpx;text-align: center; " bindtap="handleGotoLabel" data-type="youhuiquan">
                <view style=" height: 88rpx;width:88rpx;">
                    <image src='/images/home/home_coupon.png' style="height: 88rpx;width:88rpx;"></image>
                </view>

                <view class="label-des">优惠券</view>
            </view>
            <view style="width:112rpx;text-align: center; " bindtap="handleGotoLabel" data-type="jifen">
                <view style="margin-left:12rpx;height: 88rpx;width:88rpx;">
                    <image src='/images/home/home_points.png' style="height: 88rpx;width:88rpx;"></image>
                </view>
                <view class="label-des">我的积分</view>
            </view>
        </view>
        <!-- 首页提示取餐3.0-->
        <view wx:if='{{gethomeOrderList}}'>
            <view style="margin:0 0 30rpx 30rpx;" wx:if="{{homeOrderList.length>0}}">
                <view class='takefood-title'>今日餐品</view>
                <view>
                    <swiper next-margin='24rpx' style='width: 100%; height: 212rpx;'>
                        <block wx:for="{{homeOrderList}}" wx:for-index="homeOrderIndex" wx:for-item="homeOrderItem" wx:key="homeOrderIndex">
                            <swiper-item>
                                <view class="takefood-food">
                                    <view class='takefood-img-wrapper'>
                                        <image class="takefood-img" src="{{homeOrderItem.foodImage}}"></image>
                                    </view>
                                    <view>
                                        <view class='flexdisplay'>
                                            <view class='takefood-cabinet'>
                                                <view class='flexdisplay' style="line-height:50rpx;" wx:if='{{homeOrderItem.isBinding}}'>
                                                    <view class="takefood-cabinet-title">{{homeOrderItem.bindDes}}</view>
                                                    <view class="takefood-cabinet-number">
                                                        {{homeOrderItem.bindNumber}}
                                                    </view>
                                                </view>
                                                <view style="line-height:50rpx;" wx:else>
                                                    <view class="takefood-cabinet-title">没绑柜</view>
                                                </view>
                                                <view class='flexdisplay' style="line-height: 40rpx;margin:4rpx 0 8rpx;">
                                                    <view class="takefood-mealType">{{homeOrderItem.mealTypeShow}}</view>
                                                    <view class='flexdisplay' wx:if='{{homeOrderItem.foodName.length<9}}'>
                                                        <view class="takefood-foodname" wx:if='{{homeOrderItem.foodQuantity>1}}'>
                                                            {{homeOrderItem.foodName}}x{{homeOrderItem.foodQuantity}}
                                                        </view>
                                                        <view class="takefood-foodname" wx:else>{{homeOrderItem.foodName}}
                                                        </view>
                                                    </view>
                                                    <view class='flexdisplay' wx:else>
                                                        <view class="takefood-foodname"> {{homeOrderItem.foodName}}
                                                        </view>
                                                        <view wx:if="{{homeOrderItem.foodQuantity>1}}" class='takefood-foodcount'>
                                                            x{{homeOrderItem.foodQuantity}}</view>
                                                    </view>
                                                </view>
                                            </view>
                                            <view class="takefood-button" bindtap="handleTakeOrder" data-foodcode="{{homeOrderItem.foodCode}}" data-ordercode="{{homeOrderItem.orderCode}}" data-isbinding="{{homeOrderItem.isBinding}}" data-hascabinet="{{homeOrderItem.hasCabinet}}" data-binddes="{{homeOrderItem.bindDes}}"
                                                data-bindnumber="{{homeOrderItem.bindNumber}}" data-foodindex="{{homeOrderIndex}}" data-prompt="{{homeOrderItem.prompt}}">取餐</view>
                                        </view>
                                        <view class='takefood-time'>取餐时间: {{homeOrderItem.takeMealTimeDes}}</view>
                                    </view>
                                </view>
                                <view class="prompt">
                                    <text class="prompt-title"> 用餐提示: </text>
                                    <text class="prompt-des"> {{homeOrderItem.prompt}} </text>
                                </view>
                            </swiper-item>
                        </block>
                    </swiper>
                </view>
            </view>
        </view>

        <!-- 首页提示评价3.1-->
        <view wx:if='{{orderList&&orderList.length>0}}'>
            <view style="margin:0 0 30rpx 30rpx;">
                <view class='takefood-title'>订单评价</view>
                <view>
                    <swiper style='width: 100%; height: 172rpx;'>
                        <block wx:for="{{orderList}}" wx:for-index="orderIndex" wx:for-item="orderItem" wx:key="orderItem.orderCode">
                            <swiper-item>
                                <view class="order-remark-img">
                                    <image class="order-remark-img" src="/images/home/present.png"></image>
                                </view>
                                <view class="order-remark-img-title">有礼</view>
                                <view class="takefood-food" style='width:690rpx;'>
                                    <view class='takefood-img-wrapper'>
                                        <image class="takefood-img" src="{{orderItem.orderFoodList[0].foodImage}}"></image>
                                    </view>
                                    <view class='takefood-cabinet' style='margin-top:34rpx;'>
                                        <view class='order-remark'>您有15积分待领取</view>
                                        <view class='order-remark-title' wx:if='{{orderItem.foodQuantity>1&&orderItem.orderFoodList[0].foodName.length>9}}'>
                                            <view class="takefood-foodname">{{orderItem.orderFoodList[0].foodName}}</view>
                                            <view class="order-remark-title"> 等{{orderItem.foodQuantity}}件</view>
                                        </view>
                                        <view wx:elif='{{orderItem.foodQuantity>1}}' class="order-remark-title">{{orderItem.orderFoodList[0].foodName}} 等{{orderItem.foodQuantity}}件</view>
                                        <view wx:else class="takefood-foodname" style='width: 300rpx;'>{{orderItem.orderFoodList[0].foodName}}</view>
                                    </view>
                                    <view class="takefood-button" style='width:140rpx;' catchtap="handleEvaluateOrder" data-ordercode="{{orderItem.orderCode}}" data-orderfoodlist="{{orderItem.orderFoodList}}" data-foods="{{orderItem.orderFoodList}}">点击领取</view>
                                </view>
                            </swiper-item>
                        </block>
                    </swiper>
                </view>
            </view>
        </view>

        <!--取餐弹框1-->
        <view class="modulebox-background-wrapper" wx:if='{{takeFood.show}}'>
            <view class='bind-organize-warpper' style='width:580rpx;height:340rpx;'>
                <view class='bind-organize-title'>是否取餐？</view>
                <view class='bind-organize-content' wx:if='{{takeFood.currentContent}}'>{{takeFood.currentContent}}</view>
                <view class='bind-organize-content'>{{takeFood.prompt}}</view>

                <view class='bind-display'>
                    <view class='bind-organize-left' bindtap='getTakeMealInfo'>暂不取餐</view>
                    <view class='bind-organize-right' bindtap='takeFoodOrderAgain' data-again='{{false}}' data-ordercode='{{takeFood.orderCode}}'>取餐</view>
                </view>
            </view>
        </view>
        <!--取餐弹框2-->
        <view class="modulebox-background-wrapper" wx:if='{{takeFood.again}}'>
            <view class='bind-organize-warpper' style='width:580rpx;height:340rpx;'>
                <view class='bind-organize-title'>是否再次取餐？</view>
                <view class='bind-organize-content'>{{takeFood.nextContent}}</view>

                <view class='bind-display'>
                    <view class='bind-organize-left' bindtap='getTakeMealInfo'>已经取出</view>
                    <view class='bind-organize-right' bindtap='takeFoodOrderAgain' data-again='{{true}}' data-ordercode='{{takeFood.orderCode}}'>确认取餐</view>
                </view>
            </view>
        </view>
        <!--企业管理员无报餐权限弹框-->
        <view class='modulebox-background-wrapper' wx:if='{{orgAdminNoMealFlag}}'>
            <view class='bind-organize-warpper' style='width:580rpx;height:340rpx;'>
                <view class='bind-organize-title'>当前是管理员身份，无点餐权限</view>
                <view class='bind-organize-content'>您无点餐权限，请开通点餐权限或者在‘我的’页面切换为企业用户进行点餐</view>
                <view class='dialog-button' bindtap='closeDialog'>知道了</view>
            </view>
        </view>
        <!--企业管理员点餐提示弹框-->
        <view class='modulebox-background-wrapper' wx:if='{{orgAdminMealFlag}}'>
            <view class='bind-organize-warpper'>
                <view class='bind-organize-title'>当前是管理员身份,是否点餐?</view>
                <view class='bind-organize-content'>您可在'我的'页面切换为企业用户</view>
                <view class='bind-display'>
                    <view class='bind-organize-left' bindtap='closeDialog'>暂不</view>
                    <view class='bind-organize-right' bindtap='openSelectMealTime'>点餐</view>
                </view>
            </view>
        </view>
        <!-- 活动3.0 -->
        <view class="promotion-wrapper">
            <view class="promotionItem" wx:for="{{imagesList.centerImage}}" wx:for-index="promotionListIndex" wx:for-item="promotionListItem" wx:key="promotionListIndex">
                <navigator url="/pages/home/link?extendUrl={{promotionListItem.url}}">
                    <image class="promotion-img" src="{{promotionListItem.image}}" />
                </navigator>
            </view>
        </view>
        <!-- foot 图片  -->
        <view class="newuser-wrapper-2">
            <image class="newuserimg" src="{{imagesList.footImage.image}}"></image>
        </view>

        <!-- --------------------------------------- 下面是各种弹出层 --------------------------------------- -->


        <!-- 审核状态框 弹出2.6.1 -->
        <view class="modulebox-background-wrapper" wx:if="{{showCheckFlag}}">
            <view class="modulebox-wrapper-organize">
                <view style='margin:32rpx 0 20rpx;text-align: center;'>
                    <image src="/images/mine/checking.jpg" style='width:216rpx;height:216rpx;'></image>
                </view>
                <view class='bind-title'>正在审核</view>
                <view class='bind-des'>企业审核会尽快完成，请耐心等待</view>

                <view class="modulebox-button-no" catchtap="handleRefreshUser">点击刷新</view>
            </view>
        </view>

        <!-- 新人大礼 弹出 2.6.1-->
        <view class="newuser-wrapper" wx:if="{{showDaliFlag}}">
            <view class="img-wrapper">
                <view class="icon-wrapper">
                    <image style='height:88rpx;width:88rpx;' src="/images/home/guanbi.png" catchtap="closeDali"></image>

                </view>
                <image class="image-dali" src="/images/home/new_user.png"></image>
                <view class='button-dali' catchtap="getNewUserGift">立即领取</view>
            </view>
        </view>
        <!--弹出去绑定企业-->
        <view class="modulebox-background-wrapper" wx:if='{{!showCheckFlag&&showBindOrganizeFlag}}'>
            <view class='bind-organize-warpper'>
                <view class='bind-organize-title'>尚未绑定企业</view>
                <view class='bind-organize-content'>请前去绑定您所在的企业</view>

                <view class='bind-display'>
                    <view class='bind-organize-left' bindtap='closeBindOrganize'>暂不绑定</view>
                    <view class='bind-organize-right' bindtap='gotoBindOrganize'>去绑定</view>
                </view>
            </view>
        </view>
        <!-- layer弹出层 （优惠券活动 弹出） 2.6.1 -->
        <block wx:if="{{showLayerFlag}}">
            <c-discountPromotion bind:closelayer="onCloseLayer"></c-discountPromotion>
        </block>

        <!--选择预约3.0-->

        <view class="mask" wx:if="{{showMenuSelect}}" catchtouchmove="preventTouchMove"></view>

        <view style="position:fixed;bottom:0;width:100%; z-index:1001;background:#fff;" wx:if="{{showMenuSelect}}" catchtouchmove="preventTouchMove">
            <view class='flexdisplay'>
                <view style='width:72rpx;height:36rpx;position:absolute;left:204rpx;top:20rpx;' wx:if="{{userInfo.organizeTrial}}">
                    <image src='/images/msg/trial.png' style='width:72rpx;height:36rpx;position:absolute;'></image>
                    <view style='width:72rpx;line-height:36rpx;position:absolute;color:#fff;font-size:24rpx;text-align:center;'>试用</view>
                </view>
                <view class="appointment-title">
                    选择预约
                </view>
                <view class='appointment-remind'>（请在投柜后两小时内用餐）</view>
            </view>

            <view style="position:absolute;right:10rpx;top:10rpx;" catchtap='closeMenuSelect'>
                <image src='/images/home/filter_close.png' style="height:88rpx;width:88rpx;"></image>
            </view>
            <view class='appointment-choice-list'>
                <view class='flexdisplay' style="margin-bottom:20rpx;">
                    <block wx:if="{{appointmention=='today'}}">
                        <image src='/images/home/filter_checked.png' style="height:88rpx;width:88rpx;"></image>
                        <view class="appointment-choice-right-checked">预约今天 今天元气满满哦</view>
                    </block>
                    <block wx:else>
                        <image src='/images/home/filter_unchecked.png' style="height:88rpx;width:88rpx;" catchtap='handleSelectToday'></image>
                        <view class="appointment-choice-right" catchtap='handleSelectToday'>预约今天 今天元气满满哦</view>
                    </block>
                </view>
                <view class='flexdisplay' style="margin-bottom:20rpx;">
                    <block wx:if="{{appointmention=='tomorrow'}}">
                        <image src='/images/home/filter_checked.png' style="height:88rpx;width:88rpx;"></image>
                        <view class="appointment-choice-right-checked">预约明天 明天也要吃好呀</view>
                    </block>
                    <block wx:else>
                        <image src='/images/home/filter_unchecked.png' style="height:88rpx;width:88rpx;" catchtap='handleSelectTomorrow'></image>
                        <view class="appointment-choice-right" catchtap='handleSelectTomorrow'>预约明天 明天也要吃好呀</view>
                    </block>
                </view>
                <view class='flexdisplay' catchtap='handleSelectWeek'>
                    <block wx:if="{{appointmention=='week'}}">
                        <image src='/images/home/filter_checked.png' style="height:88rpx;width:88rpx;"></image>
                        <view class="appointment-choice-right-checked">预约多天 一周都有好吃哒</view>
                    </block>
                    <block wx:else>
                        <image src='/images/home/filter_unchecked.png' style="height:88rpx;width:88rpx;"></image>
                        <view class="appointment-choice-right">预约多天 一周都有好吃哒</view>
                    </block>
                </view>
            </view>
            <view class='appointment-choice-foodtype-title' wx:if="{{appointmention!='week'}}">
                选择时餐
            </view>
            <view class="appointment-choice-foodtype-list" style="margin-bottom:30rpx;border-bottom: 1rpx solid #EBEBEB;" wx:if="{{appointmention!='week'}}">
                <block wx:for="{{twoDaysMealName}}" wx:key="{{index}}">
                    <block wx:if='{{oneDayInfo[item+"Status"]==true}}'>
                        <view style="position:absolute;width:750rpx;height:142rpx;background:rgba(255,255,255,0.6);z-index:1001;" wx:if='{{!oneDayInfo[item+"OrderStatus"]}}'>
                            <image src='/images/home/filter_end.png ' style="position:absolute; right:110rpx;  top:12rpx;width:120rpx;height:115rpx;"></image>
                        </view>
                        <view class='appointment-choice-foodtype' data-mealtype='{{item}}' catchtap="startOrderMenu">
                            <image src='/images/home/filter_{{item}}.png' style="height:120rpx;width:120rpx;"></image>
                            <view class='appointment-choice-grow'>
                                <view class="appointment-choice-foodtype-name"> {{mealTypeMapSmall[item]}}</view>
                                <view class="appointment-choice-foodtype-deadline">
                                    <view>截止时间</view>
                                    <view style="margin-left:10rpx;">{{oneDayInfo[item+"DeadlineDesc"]}}</view>
                                </view>
                            </view>
                            <image src='/images/home/filter_more.png' style="height:88rpx;width:88rpx; margin-top: 16rpx;">
                            </image>
                        </view>

                    </block>
                </block>
            </view>
        </view>
    </view>

    <view style='width:100%;height:{{windowHeight}}px;' wx:else>
        <image src='/images/home/pre_loading.png' style='width:100%;height:{{windowHeight}}px;'></image>
    </view>
</view>