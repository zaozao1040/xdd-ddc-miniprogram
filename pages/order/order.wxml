<!--pages/order/order.wxml-->

<view class="wrapper">
  <!-- 标题 -->
  <view class="header-wrapper" >
    <view class="header-item {{itemStatusActiveFlag==true?'header-item-active':''}}" catchtap="changeItemStatusActiveFlag" data-flag="jinridaiqu">
      今日待取
    </view>
    <view class="header-item {{itemStatusActiveFlag==false?'header-item-active':''}}" catchtap="changeItemStatusActiveFlag" data-flag="quanbudingdan">
      全部订单
    </view>
  </view>
  <!-- 内容 -->
  <scroll-view class="order-wrapper c_scrollPosition_forCalculate"  scroll-y style="height: {{windowHeight - scrollTop}}px;" >
    <view class="order-item" wx:for="{{orderList}}" wx:for-index="orderIndex" wx:for-item="orderItem" wx:key="orderIndex">
      <view style="display:flex;justify-content: space-between;">
        <view class="order-type" >
          {{orderItem.mealTypeDes}}
        </view>
        <view class="order-status" >
          {{orderItem.orderStatusDes}}
        </view>        
      </view>
      <view class="order-time" >
        <text class='iconfont icon-shijian' decode>&nbsp;</text>{{orderItem.orderTimeDes}}用餐
      </view> 
      <view class="foods-wrapper" >
        <view class="food-item" wx:for="{{orderItem.orderFoodList}}" wx:for-index="foodIndex" wx:for-item="foodItem" wx:key="foodIndex">
          <view style="display:flex;justify-content: space-between;">
            <view class="food-name" >
                {{foodItem.name}}
            </view>
            <view class="food-count" >
                x{{foodItem.quantity}}
            </view>              
          </view>
        </view>
      </view>
      <view class="button-wrapper" >
        <view class="button quccan" >
          取餐
        </view>
        <view class="button fukuan" >
          去付款
        </view>
        <view class="button pingjia" >
          去评价
        </view>
        <view class="button quxiao" bindtap="handleCancelOrder" data-orderindex="{{orderIndex}}" data-ordercode="{{orderItem.orderCode}}"
              wx:if="{{orderItem.orderStatus  == 'PAYED_WAITINT_CONFIRM' || orderItem.orderStatus  == 'NO_PAY'}}">
          取消
        </view>
        
      </view>

    </view>
  </scroll-view>

</view>


