<view>
    <view>
        <!-- 标题 -->
        <view class="header-wrapper">
          <view class="header-item-active">{{spareInfo.mealDate}} {{spareInfo.mealTypeDes}}  </view>
        </view>
        <view wx:if="{{orderList.length==0}}" class='c_scrollPosition_forCalculate'
            style="font-size:30rpx;background:#F5F5F5;height:{{windowHeight-scrollTop}}px;">
            <view style='padding:200rpx 0  0 256rpx;width:240rpx;height:240rpx;'>
                <image src="/images/order/noorder.png" style="width:240rpx;height:240rpx;"></image>
            </view>
            <view
                style='font-family: PingFang-SC-Regular;font-size: 30rpx;color: #999999;letter-spacing: 0;text-align: center;'>
                <view wx:if='{{itemStatusActiveFlag==0}}'>暂无备用餐订单，快去点餐吧～</view>
                <view   style='margin-top:60rpx;' class='button-login'
                    catchtap='handleGotoSpare'>去申请</view>
            </view>
        </view>
        <scroll-view wx:else class="c_scrollPosition_forCalculate" scroll-y style="height: {{windowHeight - scrollTop}}px;background:#F5F5F5;" >
            <view style='height:{{windowHeight - scrollTop}}px; padding:20rpx;'>

                <view wx:if='{{orderList.length==0}}'>
                    <view style='padding:200rpx 0  0 256rpx;width:240rpx;height:240rpx;'>
                        <image src="/images/order/noorder.png" style="width:240rpx;height:240rpx;"></image>
                    </view>
                    <view
                        style='font-family: PingFang-SC-Regular;font-size: 30rpx;color: #999999;letter-spacing: 0;text-align: center;'>
                        <view wx:if='{{itemStatusActiveFlag==1}}'>没有待取餐的订单哦～</view>
                    </view>
                </view>
                <view wx:else>
                    <view wx:for="{{orderList}}" wx:for-index="orderIndex" wx:for-item="orderItem" wx:key="orderIndex">
                        <view class='one-order' catchtap="handleGotoOrderDetail"
                            data-ordercode="{{orderItem.orderCode}}">
                            <view class='m-s'>
                                <view class='manager' wx:if='{{orderItem.orgOrder}}'>管理员</view>
                                <view class='supplementary' wx:if='{{orderItem.supplementtaryMeal==1}}'>补餐</view>
                            </view>

                            <view class='one-order-top'>
                                <view class='top-date'>{{orderItem.takeMealTimeDes}}{{orderItem.mealTypeDes}}</view>
                                <view class='flex-a'>
                                    <view class='top-date'
                                        style='color:{{orderItem.orderStatusDes.differentColor?"#F79C4C":"#666666"}};'>
                                        {{orderItem.orderStatusDes.label}}</view>
                                    <image style='margin-left:10rpx;margin-top:30rpx;height:24rpx;width:24rpx;'
                                        src='/images/order/right.png'></image>

                                </view>
                            </view>
                            <view class='flex-b' style='margin:32rpx 0 20rpx;'>
                                <view class='flex-a'>
                                    <!--名称可能会溢出，需要指定最长的width-->
                                    <view class='food-name'>{{orderItem.orderFoodList[0].foodName}}</view>
                                    <view class='food-count' wx:if='{{orderItem.foodQuantity>1}}'>
                                        等{{orderItem.foodQuantity}}件餐品</view>
                                </view>
                                <view class="food-name" wx:if='{{orderItem.cabinet&&orderItem.cabinet.length>0}}'>
                                    <text style='font-size:26rpx;'>柜号 </text><text
                                        style='color:#F79C4C;'>{{orderItem.cabinet[0].cabinetNumber}}-{{orderItem.cabinet[0].cellNumber}}</text>
                                </view>

                            </view>

                            <view class='flex-a'>
                                <view class='food-money'>实付：￥<text
                                        style='font-weight:500;position:relative; left:-4rpx;;'>{{orderItem.payPrice}}</text>
                                </view>
                                <view wx:if="{{orderItem.standardPrice}}">
                                    <image src='/images/order/standard.png'
                                        style='width:68rpx;height:32rpx;margin-left:10rpx;margin-top:13rpx;'></image>
                                </view>
                                <view class='take-time'>
                                    <view
                                        wx:if='{{orderItem.takeMealEndTime&&!(orderItem.status== 2 &&orderItem.evaluateStatus  == 1)}}'>
                                        截止时间:{{orderItem.takeMealEndTime}}</view>
                                </view>
                                <view class='order-button'>
                                    <block wx:if="{{!orderItem.expiredFlag}}">
                                        <view wx:if="{{orderItem.status== 1}}" class='see-detail'
                                            style='margin-left:16rpx;' catchtap="handleCancelOrder"
                                            data-standardprice="{{orderItem.standardPrice}}"
                                            data-orderindex="{{orderIndex}}" data-ordercode="{{orderItem.orderCode}}"
                                            data-payprice="{{orderItem.payPrice}}"
                                            data-paystatus="{{orderItem.payStatus}}">
                                            取消订单
                                        </view>
                                    </block>
                                </view>
                            </view>
                        </view>
                    </view>
                </view>
                <view wx:if='{{loadingData}}' class="hasMore-wrapper"
                    style="margin-top:60rpx;font-family: PingFang-SC-Regular; font-size: 26rpx; color: #666666; letter-spacing: 0; text-align: center;">
                    正在加载数据...
                </view>
                <!-- <view wx:elif='{{!hasMoreDataFlag}}' class="hasMore-wrapper" style="margin-top:60rpx;font-family: PingFang-SC-Regular; font-size: 26rpx; color: #666666; letter-spacing: 0; text-align: center;">
                    没有更多了..
                </view> -->
            </view>
        </scroll-view>
    </view>
</view>